
  Propuesta de Plan de Implementación Detallado:

  Fase 1: Modelos de Datos Centrales y Configuración Básica (Estimado: 3-4 semanas)


   * 1.1 Ajustes de Esquema de Base de Datos:
       * Productos: Añadir SKU (CharField, único), stock_actual (IntegerField), stock_minimo (IntegerField), foto
         (ImageField, opcional). price a price_usd (DecimalField).
       * Clientes: Añadir cedula_rif (CharField, único), limite_credito (DecimalField), saldo_pendiente (DecimalField,
         calculado).
       * Ventas: Añadir a Sale tasa_cambio_ves (DecimalField), total_ves (DecimalField).
       * Nuevo Modelo: TasaCambio: fecha (DateField, único), tasa_usd_ves (DecimalField), usuario_registro (ForeignKey a User).
       * Nuevo Modelo: Proveedor: nombre, rif, telefono, email, direccion. (CRUD completo).
       * Nuevo Modelo: MetodoPago: nombre, es_moneda_extranjera (BooleanField, para IGTF), requiere_referencia (BooleanField). (CRUD completo).
       * Nuevo Modelo: PagoCredito: venta (ForeignKey a Sale), fecha_pago, monto_usd, monto_ves, tasa_pago
         (DecimalField), metodo_pago (ForeignKey a MetodoPago), referencia (CharField, opcional).
       * Nuevo Modelo: MovimientoInventario: producto (ForeignKey a Product), tipo_movimiento (CharField:
         'entrada'/'salida'), cantidad, fecha, usuario, razon.
       * Modelo de Configuración de Empresa: nombre, direccion, rif, logo (ImageField).


   * 1.2 Configuración Inicial y Gestión de Tasas (RF01, RF12):
       * Implementar CRUD de TasaCambio en Admin.
       * Desarrollar modal para ingreso de tasa diaria al inicio de la app (si no hay tasa para hoy).
       * Lógica para obtener la tasa actual.
       * Implementar CRUD de Configuración de Empresa (RF12).


   * 1.3 Gestión de Productos y Clientes (RF02, RF04):
       * Modificar CRUD de Producto existente para incluir nuevos campos (lógica de auto-generación de SKU:
         PrefijoCategoría + contador).
       * Modificar CRUD de Cliente existente para incluir nuevos campos (Cédula/RIF, Límite de Crédito, Saldo Pendiente).
       * Implementar CRUD de Proveedor.


   * 1.4 Autenticación de Usuarios y Roles (RF11):
       * Implementar asignación básica de roles (Admin asigna roles).
       * Implementar control de acceso básico para roles Admin/Cajero.

  Fase 2: Punto de Venta (TPV) y Control de Inventario (Estimado: 4-6 semanas)


   * 2.1 Mejoras en la Interfaz del TPV (RF06):
       * Modificar búsqueda de productos para incluir SKU.
       * Actualizar visualización del carrito para mostrar precio unitario y total de línea en USD.
       * Implementar cálculo en tiempo real y visualización prominente del total en VES (usando tasa actual).
       * Integrar cálculo de IGTF basado en método de pago.


   * 2.2 Proceso de Pago e Integración de Inventario (RF03, RF07):
       * Actualizar proceso de pago para incluir nuevos métodos de pago (CRUD para MetodoPago).
       * Implementar lógica para pago a "Crédito": seleccionar cliente, marcar venta como pendiente, actualizar
         saldo_pendiente del cliente.
       * Implementar deducción automática de stock al confirmar la venta (RF03).
       * Mostrar resumen en pantalla para caja fiscal (total VES).


   * 2.3 Gestión de Inventario (RF03):
       * Implementar interfaz para entrada/ajuste manual de stock (usando MovimientoInventario).
       * Desarrollar alertas visuales para bajo stock (dashboard, lista de productos).


   * 2.4 Gestión de Ventas Pendientes (RF08):
       * Desarrollar interfaz para listar ventas a crédito impagas.
       * Implementar funcionalidad "Marcar como pagado": registrar PagoCredito (fecha, monto, método, referencia),
         actualizar saldo_pendiente del cliente.

  Fase 3: Reportes y Refinamientos (Estimado: 2-3 semanas)


   * 3.1 Generación de Reportes (RF09, RF10):
       * Reporte de Cierre de Caja Diario (RF09): Generar reporte con ventas totales en USD/VES por método de pago y
         ventas a crédito. (Primero en pantalla, exportación posterior).
       * Reporte de Inventario (RF10):
           * Lista de productos con stock bajo mínimo.
           * Reporte de movimiento de inventario (fecha, tipo, cantidad, producto, usuario).
       * Historial de Compras por Cliente (RF05): Mostrar todas las ventas (crédito y contado) para un cliente dado.


   * 3.2 Usabilidad y Responsividad (RNF01):
       * Revisar y optimizar todas las interfaces nuevas y modificadas para dispositivos táctiles y responsividad.


   * 3.3 Refinamientos Generales:
       * Implementar alerta para tasa diaria no ingresada.
       * Asegurar que todos los nuevos campos estén correctamente integrados en formularios y visualizaciones.
       * Pruebas exhaustivas de todas las funcionalidades nuevas y modificadas.

  Fase 4: Despliegue y Toques Finales (Estimado: 1 semana)


   * 4.1 Asistencia para el Despliegue: Guiar al usuario en el despliegue local en Windows/Linux.
   * 4.2 Documentación: Guía de usuario básica para nuevas funcionalidades.

  ---

  Preguntas Aclaratorias (Re-evaluación después de la propuesta del plan):


  La mayoría de mis preguntas iniciales fueron respondidas y el plan las incorpora. Los puntos restantes son detalles
  específicos que se pueden abordar durante la implementación, pero es bueno confirmar el enfoque general.


   * Auto-generación de SKU (RF02): El plan menciona PrefijoCategoría + contador. ¿Tiene el usuario un prefijo específico
     en mente para cada categoría, o debería ser esto configurable? Si es configurable, ¿dónde debería gestionarse (ej. en
      el modelo de Categoría)?
   * IGTF (Contexto Venezolano): El plan incluye el cálculo de IGTF. ¿El porcentaje de IGTF necesita ser configurable? Si
     es así, ¿dónde debería gestionarse esta configuración (ej. en el modelo de Configuración de Empresa)?
   * Recibo (RF07): El plan menciona un "resumen claro con el total en VES (para ingresar manualmente en la caja fiscal)".
      ¿Esto implica un simple resumen en pantalla, o un "recibo" más estructurado que pueda imprimirse (aunque no
     directamente desde la app, sino vía impresión del navegador)? El archivo sales_receipt_pdf.html ya existe, podría ser
      una buena base.



OTRAS Preguntas

 La mayoría de mis preguntas iniciales fueron respondidas y el plan las incorpora. Los puntos restantes son detalles
  específicos que se pueden abordar durante la implementación, pero es bueno confirmar el enfoque general.


   * Auto-generación de SKU (RF02): El plan menciona PrefijoCategoría + contador. ¿Tiene el usuario un prefijo específico
     en mente para cada categoría, o debería ser esto configurable? Si es configurable, ¿dónde debería gestionarse (ej. en
      el modelo de Categoría)?
   * IGTF (Contexto Venezolano): El plan incluye el cálculo de IGTF. ¿El porcentaje de IGTF necesita ser configurable? Si
     es así, ¿dónde debería gestionarse esta configuración (ej. en el modelo de Configuración de Empresa)?
   * Recibo (RF07): El plan menciona un "resumen claro con el total en VES (para ingresar manualmente en la caja fiscal)".
      ¿Esto implica un simple resumen en pantalla, o un "recibo" más estructurado que pueda imprimirse (aunque no
     directamente desde la app, sino vía impresión del navegador)? El archivo sales_receipt_pdf.html ya existe, podría ser
      una buena base.